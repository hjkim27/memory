##  개발 내용 확인
> PDF 파일 내부의 텍스트 추출 기능      
> 추출된 텍스트에 대해 알고리즘을 이용해 정보 제공이 필요한 데이터를 검색/식별하는 기능     
> 발급자 기본정보를 식별하여 이를 마스킹(치환) 한 후 PDF파일을 재 조립 (저장)  하는 기능    
> 기존 Java Web application 에서 사용가능한 형태의 라이브러리로 패키징  
> 외부 Java 요청에 대해 정상 처리 여부 테스트 진행  

0. 서버환경
    - jdk : 1.8.0_232_64bit
    - os : redhat 8.2

1. 대상파일 : 전자증명서
    - 가족관계증명서(일반/상세/특정), 기본증명서(상세)
    - pdf 형태로 발급된 증명서에 한하며, 스캔된 이미지 증명서는 없음
    - text형태의 pdf 대상 추출

2. 추출정보
    - 주민등록번호 + 성명, 주소
    - 변경될 수 있음. > 전체 혹은 필요한 것만

3. 요청사항
    - 임시데이터 암호화
    - 본인들이 어떤 방식으로 요청했을 때 원하는 데이터를 얻을 수 있는지 (API 아닙니다...)
    - 서류별 추출 가능 범위
    - 호출/응답 방식
    - 특정 데이터에 대한 구분이 불가능할 경우 전체 데이터 반환 요청
    - 마스킹의 경우 ...? 뭔가 말 했는데 정확히 못알아들음. 추가 확인 필요  

## 개발방향

1. PDF 파일 내부의 텍스트 추출 기능   
`List<String> getText(File pdfFile)   `
    - Pdf파일 업로드   
    - text 정보 추출   
    - 추출된 정보 반환  
    pdfFile : 전자증명서 pdf 파일   
    returnType : 추출정보가 담긴 List 객체

2. 추출된 텍스트에 대해 알고리즘을 이용해 정보 제공이 필요한 데이터를 검색/식별하는 기능   
`Map<String, List<String>> getText(File pdfFile, Set type)`
    - A와 동일한 진행 방식   
    pdfFile : 전자증명서 pdf 파일   
    type : 정보 제공이 필요한 데이터 키 값(어떤 키 값인지 몰라서 set으로 임의로 넣어두었음)   
        ** 추출된 텍스트에서 각 데이터가 구분이 가능한지 확인이 필요. number, name, address 등 (테스트 확인 후 재전달 예정)    
    returnType : 데이터키값을 key, 추출정보가 담긴 List 객체를 value로 하는 Map 객체

3. 발급자 기본정보를 식별하여 이를 마스킹(치환) 한 후 PDF파일을 재 조립 (저장)  하는 기능   
    `maskingPDFText(File pdfFile)`   
    - Pdf 파일 업로드   
    - text 정보 추출   
    - 추출된 정보 중 주민등록번호 정규식에 일치하는 정보 마스킹 처리
    - 수정된 pdf파일 반환(byte 혹은 file 로 반환 예정)   
    pdfFile : 전자증명서 pdf 파일   
    returnType : byte[] 혹은 File   
    ** 주민등록번호에 대한 마스킹만 전달받은 상태로 다른 개인정보에 대해서는 고려하지 않음.

4. 기존 Java Web application 에서 사용가능한 형태의 라이브러리로 패키징
    - Jar 파일로 제공 예정.
    - 고객사 프로젝트에 depencency 추가, 메서드 호출로 사용하면 됨

5. 외부 Java 요청에 대해 정상 처리 여부 테스트 진행
    - 파일 업로드만 가능한 web페이지 제작 후 jar 파일 테스트를 진행할 예정.   
    ** 사내 테스트를 위해서 os 정보 요청드렸었습니다. 이 과정에서 고객사에서 restAPI호출방식이라는 혼동이 있었던 것 같음

## 작업내용
1. PDF 파일 내부의 텍스트 추출 기능
    - 내부 모든 글자 추출 가능. 

2. 추출된 텍스트에 대해 알고리즘을 이용해 정보 제공이 필요한 데이터를 검색/식별하는 기능
    - pdf 내 text 중 특정 정보가 포함된 line 구분 완료
    - 다음 키워드가 들어있는 키워드 특정 가능
        등록기준지, 본인, 출생장소, 신고일, 신고인, 송부일, 송부자,발급시각, 신청인, 발행번호,증명서
    - 특정 정규식을 만족하는 단어 추출부분 작업 진행중 (정규식 활용)
    - 추가 확인중

3. 발급자 기본정보를 식별하여 이를 마스킹(치환) 한 후 PDF파일을 재 조립 (저장)  하는 기능
    - overlay 를 사용해 텍스트 위해 다른 텍스트를 출력하도록 작업.      
    문제1. 기존 텍스트를 가리더라도 드래그 시 이전 텍스트를 긁을 수 있음. (뭐지)        
    문제2. matrix 로 검출된 텍스트의 위치를 찾았으나, 해당 위치보다 위쪽으로 표시됨. 
    \>>
    - 위치는 잡았으나 이전텍스트가 그대로 읽힘. (뭐지2)     
    방안1) 모든 텍스트를 지우고 다시 적는다     
    방안2) 텍스트를 이미지로 저장, 다시 pdf 로 변환한다.


4. 기존 Java Web application 에서 사용가능한 형태의 라이브러리로 패키징
5. 외부 Java 요청에 대해 정상 처리 여부 테스트 진행

### 추출방식 상세
1) PDF 파일 내 모든 텍스트 추출
2) PDF 파일 내 모든 텍스트 단어별 추출
    - 수정 진행중
3) 원하는 단어가 들어있는 라인만 추출
    - 수정 진행중
4) 원하는 단어가 들어있는 라인의 특정 정보 추출
    - 수정 진행중
    - 이름, 출생년월일, 주민등록번호, 성별
    - 등록기준지, 발급일, 발급시각, 신청인, 발행번호
    - 출생장소, 신고일, 신고인, 송부일, 송부자,
        - A. 정규식     
            ex) 본인 주민등록번호, 모 출생년월일
        - B. 그 단어의 값       
            ex) 발급시각 > 17시 13분        
                신청인 > 홍길동
